(this.webpackJsonpwgucapstone=this.webpackJsonpwgucapstone||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},41:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),l=a(32),o=a.n(l),i=(a(39),a(40),a(22),a(41),a(17)),r=a(7),c=a(3),d=a(4),u=a(2),m=a(6),p=a(5),h=a(1),g=a.n(h),b=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={username:"",password:"",updated_date:"",created_date:"",count:"",error:"",path:window.location.protocol+"//"+window.location.hostname},s.onChange=s.onChange.bind(Object(u.a)(s)),s.onSubmit=s.onSubmit.bind(Object(u.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.checkLoginSession(),this.checkUserCount(),console.log("test: /capstone")}},{key:"onChange",value:function(e){console.log("eventname: "+e.target.name);var t=this.state;t[e.target.name]=e.target.value,this.setState(t)}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),g.a.get(this.state.path+":5000/user/u/"+this.state.username).then((function(e){t.setState({user:e.data}),console.log(t.state.user)})).finally((function(){try{if(""===t.state.username)throw"ERROR: Username was left blank.";if(""===t.state.password)throw"ERROR: Password was left blank.";if(null===t.state.user)throw"ERROR: Username or password is incorrect.";if(t.state.user.password!==t.state.password)throw"ERROR: Username or password is incorrect."}catch(e){return t.setState({error:e}),void(null!==document.getElementById("error")&&document.getElementById("error").classList.remove("d-none"))}t.createLoginSession(),t.props.history.push("/main")}))}},{key:"checkUserCount",value:function(){var e=this;g.a.get(this.state.path+":5000/user/count").then((function(t){e.setState({count:t.data}),console.log("user count: "+e.state.count)})).finally((function(){if(e.state.count<=0){e.setState({updated_date:Date.now}),e.setState({created_date:Date.now});var t=new Date,a=new Date;g.a.post(e.state.path+":5000/user",{username:"Admin",type:"Admin",password:"admin",updatedBy:"Admin",createdBy:"Admin",updatedDate:t,createdDate:a}).then((function(e){}))}}))}},{key:"checkLoginSession",value:function(){"false"!==localStorage.getItem("isLoggedIn")&&localStorage.getItem("isLoggedIn")?"true"===localStorage.getItem("isLoggedIn")&&this.props.history.push("/main"):this.props.history.push("/")}},{key:"createLoginSession",value:function(){console.log(this.state.user._id),localStorage.setItem("userId",this.state.user._id),localStorage.setItem("username",this.state.user.username),localStorage.setItem("userType",this.state.user.type),localStorage.setItem("isLoggedIn",!0)}},{key:"render",value:function(){return n.a.createElement("form",{className:"form-login border text-center full-center",onSubmit:this.onSubmit},n.a.createElement("p",{className:"error"},this.state.error),n.a.createElement("div",null,n.a.createElement("input",{type:"text",placeholder:"Username",name:"username",value:this.state.username,onChange:this.onChange,className:"form-control"})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange,className:"form-control"})),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"col"},n.a.createElement("button",{className:"btn btn-lg btn-primary btn-block"},"Sign in"))))}}]),a}(s.Component),y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={admin:[{title:"Main",link:"".concat("/capstone","/main")},{title:"Users",link:"/capstone/users"},{title:"Customers",link:"/capstone/customers"},{title:"Appointments",link:"/capstone/appointments"},{title:"Reports",link:"/capstone/reports"},{title:"Search",link:"/capstone/search"}],dispatcher:[{title:"Main",link:"".concat("/capstone","/main")},{title:"Customers",link:"/capstone/customers"},{title:"Appointments",link:"/capstone/appointments"}],worker:[{title:"Main",link:"".concat("/capstone","/main")}],list:[]},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){"Admin"===localStorage.getItem("userType")?this.setState({list:this.state.admin}):"Dispatcher"===localStorage.getItem("userType")?this.setState({list:this.state.dispatcher}):this.setState({list:this.state.worker})}},{key:"onLogout",value:function(){localStorage.setItem("isLoggedIn",!1),localStorage.setItem("userId",""),localStorage.setItem("userType","")}},{key:"render",value:function(){return n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark static-top"},n.a.createElement("div",{className:"container"},n.a.createElement("a",{className:"navbar-brand",href:"#"},"[Company Name] Scheduler"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},n.a.createElement("ul",{className:"navbar-nav ml-auto"},this.state.list.map((function(e,t){return n.a.createElement("li",{className:"nav-item",key:t},n.a.createElement("a",{className:"nav-link",href:e.link},e.title))})),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",href:"",onClick:this.onLogout},"Log Out"))))))}}]),a}(s.Component),v=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={path:window.location.protocol+"//"+window.location.hostname,crudState:"",selected:"",cUser:"",year:"",month:"",monthName:"",title:"",cust:"",worker:"",add:"",stime:"",etime:"",index:0,users:[],listmonths:["January","February","March","April","May","June","July","August","September","October","November","December"],listdays:[],listcust:[],listwork:[],listallapp:[],listapp:[]},s.onClickDay=s.onClickDay.bind(Object(u.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){"false"!==localStorage.getItem("isLoggedIn")&&localStorage.getItem("isLoggedIn")||this.props.history.push("/");var e=new Date;this.setState({year:e.getFullYear(),month:e.getMonth(),monthName:this.state.listmonths[e.getMonth()]}),this.loadDays(e.getFullYear(),e.getMonth())}},{key:"onClickDay",value:function(e){var t=this.state.year+""+this.state.month+e,a=[];this.state.listallapp.forEach((function(e){var s=new Date(e.stime);(s=s.getFullYear()+""+s.getMonth()+s.getDate())==t&&(a.push(e),console.log(e))})),console.log("how long: "+a.length),a.length?this.setState({listapp:a,title:a[0].title,cust:this.state.listcust[a[0].custid],worker:this.state.listwork[a[0].userid],add:this.state.listcust["add:"+a[0].custid],stime:a[0].stime,etime:a[0].etime,index:0}):this.setState({listapp:[],title:"",cust:"",worker:"",add:"",stime:"",etime:"",index:0})}},{key:"checkLoginSession",value:function(){"true"===localStorage.getItem("isLoggedIn")&&this.props.history.push("/Main")}},{key:"createLoginSession",value:function(){console.log(this.state.user._id),localStorage.setItem("userId",this.state.user._id),localStorage.setItem("isLoggedIn",!0)}},{key:"loadDays",value:function(e,t){var a=this,s=parseInt(t)+1;console.log(e+"-"+s),console.log(e+"-"+t);var n=new Date(e+"-"+s+"-1");console.log(n),console.log(n.getDay());var l=n.getDay(),o=new Date(e,s,0).getDate(),i=[],r=0;console.log("day of week: "+l),console.log(parseInt(t)-1),console.log("days: "+o);for(var c=0;c<l;c++)i.push({num:"",app:"",color:"no-day-square"}),r++,console.log(r);for(var d=0;d<o;d++)i.push({num:d+1,app:"",color:"empty-square"}),r++;for(var u=42-o-l,m=0;m<u;m++)i.push({num:"",app:"",color:"no-day-square"});console.log(i),r=0;var p=[];g.a.get(this.state.path+":5000/appointment/m/"+e+"/"+s+"/1").then((function(e){a.setState({listallapp:e.data}),p=e.data})).finally((function(){for(var e={},t=0;t<p.length;t++){var s=new Date(p[t].stime),n=[s.getFullYear(),s.getMonth(),s.getDate()].join("-");e[n]=e[n]||0,e[n]++}for(var o in e)if(e.hasOwnProperty(o)){var r=new Date(o).getDate()+l-1;console.log(r),i[r].app="Appointments: "+e[o],i[r].color="filled-square"}a.setState({listdays:i});var c={};g.a.get(a.state.path+":5000/customer/").then((function(e){e.data.forEach((function(e){c[e._id]=e.name,c["add:"+e._id]=e.address})),a.setState({listcust:c}),console.log(a.state.listcust["5ecb538a9d80159f14099481"])}));var d={};g.a.get(a.state.path+":5000/user/").then((function(e){e.data.forEach((function(e){"Field Worker"===e.type&&(d[e._id]=e.username)})),d.null="null",a.setState({listwork:d}),console.log(a.state.listwork),console.log(a.state.listwork["5ecb538a9d80159f14099481"])}))}))}},{key:"changeMonth",value:function(e){var t=this.state.year,a=parseInt(this.state.month)+1;console.log(t+"-"+a+"-1");var s=new Date(t+"-"+a+"-1");console.log(s),s.setMonth(s.getMonth()+e);new Date(t+"-"+(a+e+1)+"-1");console.log("monthnum: "+(a+e)),console.log(s),this.setState({year:s.getFullYear(),month:s.getMonth(),monthName:this.state.listmonths[s.getMonth()]}),this.loadDays(s.getFullYear(),s.getMonth())}},{key:"changeApp",value:function(e){this.state.index+e<0||this.state.index+e>=this.state.listapp.length||(console.log(this.state.listwork[this.state.listapp[this.state.index+e].userid]),this.setState({title:this.state.listapp[this.state.index+e].title,cust:this.state.listcust[this.state.listapp[this.state.index+e].custid],worker:this.state.listwork[this.state.listapp[this.state.index+e].userid],add:this.state.listcust["add:"+this.state.listapp[this.state.index+e].custid],stime:this.state.listapp[this.state.index+e].stime,etime:this.state.listapp[this.state.index+e].etime,index:this.state.index+e}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row p-0"},n.a.createElement("div",{className:"col-lg-3 border recent p-0 no-day-square d-none d-lg-block"},this.state.listapp.map((function(t,a){return n.a.createElement("div",{className:"app-list-border"},n.a.createElement("h3",{className:"app-list-border filled-square m-0"},"Title: ",t.title),n.a.createElement("div",{className:"empty-square app-list-label"},"Customer: ",e.state.listcust[t.custid]),n.a.createElement("div",{className:"empty-square app-list-label"},"Contracter: ",e.state.listwork[t.userid]),n.a.createElement("div",{className:"empty-square app-list-label"},"Address: ",e.state.listcust["add:"+t.custid]),n.a.createElement("div",{className:"empty-square app-list-label"},"Timeframe: ",new Date(t.stime).toLocaleTimeString()," - ",new Date(t.etime).toLocaleTimeString()))}))),n.a.createElement("div",{className:"col-lg-3 border recent no-day-square d-md-block d-lg-none  "},n.a.createElement("div",{className:"row p-0"},n.a.createElement("div",{className:"col-1 p-0"},n.a.createElement("button",{type:"button",class:"btn btn-secondary  w-100 h-100 m-0",onClick:function(){return e.changeApp(-1)}},n.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-left",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{"fill-rule":"evenodd",d:"M5.854 4.646a.5.5 0 0 1 0 .708L3.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z"}),n.a.createElement("path",{"fill-rule":"evenodd",d:"M2.5 8a.5.5 0 0 1 .5-.5h10.5a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"})))),n.a.createElement("div",{className:"col-10 p-0"},n.a.createElement("h3",{className:"app-list-border filled-square m-0"},"Title: ",this.state.title),n.a.createElement("div",{className:"empty-square app-list-label"},"Customer: ",this.state.cust),n.a.createElement("div",{className:"empty-square app-list-label"},"Contracter: ",this.state.worker),n.a.createElement("div",{className:"empty-square app-list-label"},"Address: ",this.state.add),n.a.createElement("div",{className:"empty-square app-list-label"},"Timeframe: ",new Date(this.state.stime).toLocaleTimeString()," - ",new Date(this.state.etime).toLocaleTimeString()," ")),n.a.createElement("div",{className:"col-1 p-0"},n.a.createElement("button",{type:"button",class:"btn btn-secondary  w-100 h-100 m-0",onClick:function(){return e.changeApp(1)}},n.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-right",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{"fill-rule":"evenodd",d:"M10.146 4.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L12.793 8l-2.647-2.646a.5.5 0 0 1 0-.708z"}),n.a.createElement("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8z"})))))),n.a.createElement("div",{className:"col-lg-9 border border-left-0 calendar "},n.a.createElement("div",{className:"row p-0"},n.a.createElement("div",{className:"col-1 p-0"},n.a.createElement("button",{type:"button",class:"btn btn-secondary  w-100 h-100 m-0",onClick:function(){return e.changeMonth(-1)}},n.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-left",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{"fill-rule":"evenodd",d:"M5.854 4.646a.5.5 0 0 1 0 .708L3.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z"}),n.a.createElement("path",{"fill-rule":"evenodd",d:"M2.5 8a.5.5 0 0 1 .5-.5h10.5a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"})))),n.a.createElement("div",{className:"col-10"},n.a.createElement("h4",{className:"display-4 mb-4 text-center"},this.state.monthName+" "+this.state.year)),n.a.createElement("div",{className:"col-1 p-0"},n.a.createElement("button",{type:"button",class:"btn btn-secondary  w-100 h-100 m-0",onClick:function(){return e.changeMonth(1)}},n.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-right",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{"fill-rule":"evenodd",d:"M10.146 4.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L12.793 8l-2.647-2.646a.5.5 0 0 1 0-.708z"}),n.a.createElement("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8z"}))))),n.a.createElement("header",null,n.a.createElement("div",{className:"row d-none d-md-flex p-1 bg-dark text-white"},n.a.createElement("h5",{className:"col-sm p-1 text-center"},"Sunday"),n.a.createElement("h5",{className:"col-sm p-1 text-center"},"Monday"),n.a.createElement("h5",{className:"col-sm p-1 text-center"},"Tuesday"),n.a.createElement("h5",{className:"col-sm p-1 text-center"},"Wednesday"),n.a.createElement("h5",{className:"col-sm p-1 text-center"},"Thursday"),n.a.createElement("h5",{className:"col-sm p-1 text-center"},"Friday"),n.a.createElement("h5",{className:"col-sm p-1 text-center"},"Saturday"))),n.a.createElement("div",{className:"calendar-days row"},this.state.listdays.map((function(t,a){return n.a.createElement("div",{className:t.color+" square border",key:a,name:t.num,onClick:function(){return e.onClickDay(t.num)}},n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"table"},n.a.createElement("div",{className:"table-cell"},n.a.createElement("h5",{className:"daynum"},t.num),n.a.createElement("p",{className:"appnum"},t.app)))))})))))))}}]),a}(s.Component),E=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=document.getElementById("top");document.body.scrollTop>20||document.documentElement.scrollTop>20?e.style.display="block":e.style.display="none"}},{key:"toTop",value:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},{key:"render",value:function(){return n.a.createElement("button",{className:"btn btn-primary d-none d-sm-block d-md-none btn-top",id:"top",onClick:this.toTop},n.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-up-square",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{"fill-rule":"evenodd",d:"M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),n.a.createElement("path",{"fill-rule":"evenodd",d:"M4.646 8.354a.5.5 0 0 0 .708 0L8 5.707l2.646 2.647a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 0 .708z"}),n.a.createElement("path",{"fill-rule":"evenodd",d:"M8 11.5a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-1 0v5a.5.5 0 0 0 .5.5z"})))}}]),a}(s.Component),f=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={path:window.location.protocol+"//"+window.location.hostname,crudState:0,selected:"",user:"",type:"Admin",pass:"",cPass:"",editUser:"",lbutton:"Save",rbutton:"Cancel",selCrud:"option1",selectedName:"",selectedIndex:0,disabled:!1,header:"Create New User",users:[],error:"",runtest:!1},s.onSubmit=s.onSubmit.bind(Object(u.a)(s)),s.onChange=s.onChange.bind(Object(u.a)(s)),s.onCancel=s.onCancel.bind(Object(u.a)(s)),s.handleCrudChange=s.handleCrudChange.bind(Object(u.a)(s)),s.handleUserChange=s.handleUserChange.bind(Object(u.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){"false"!==localStorage.getItem("isLoggedIn")&&localStorage.getItem("isLoggedIn")&&"Admin"===localStorage.getItem("userType")||void 0!==this.props.history&&this.props.history.push("/"),this.getAllUsers()}},{key:"crudRefresh",value:function(e,t){document.getElementById("lbloption"+e).classList.remove("focus"),document.getElementById("lbloption"+e).classList.remove("active"),document.getElementById("lbloption"+t).classList.add("focus"),document.getElementById("lbloption"+t).classList.add("active"),this.setState({lbutton:"Save",disabled:!1})}},{key:"handleUserChange",value:function(e){var t=this,a=e.target.value;"option1"===this.state.selCrud?(this.crudRefresh(1,2),this.setState({selCrud:"option2"})):"option3"===this.state.selCrud&&(this.crudRefresh(3,2),this.setState({selCrud:"option2"})),g.a.get(this.state.path+":5000/user/"+this.state.users[a]._id).then((function(e){t.setState({editUser:e.data})})).finally((function(){t.setState({user:t.state.editUser.username,type:t.state.editUser.type,pass:"",cPass:"",selectedName:"user"+a,selectedIndex:a,crudState:2})}))}},{key:"handleTestReset",value:function(){var e=this,t="",a=!1;g.a.get(this.state.path+":5000/user/u/TestDataDeleteMe").then((function(e){null!==e.data?t=e.data._id:a=!0})).finally((function(){!0!==a&&g.a.delete(e.state.path+":5000/user/"+t).then((function(){})).finally((function(){e.getAllUsers()}))}))}},{key:"handleCrudChange",value:function(e){if(console.log("current select:"+e.target.value),"option1"===e.target.value)console.log("save time"),document.getElementById("error").classList.add("d-none"),this.setState({user:"",type:"Admin",pass:"",cPass:"",lbutton:"Save",selectedName:"",selectedIndex:-1,disabled:!1,crudState:0});else if("option2"===e.target.value){if(""===this.state.selectedName)return this.setState({error:"ERROR: Please select user before attempting to edit a user."}),document.getElementById("error").classList.remove("d-none"),this.crudRefresh(2,1),void this.setState({lbutton:"Save",disabled:!1,crudState:0});console.log("save time"),this.setState({lbutton:"Save",disabled:!1,crudState:2})}else{if(""===this.state.selectedName)return this.setState({error:"ERROR: Please select user before attempting to delete a user."}),document.getElementById("error").classList.remove("d-none"),this.crudRefresh(3,1),void this.setState({lbutton:"Save",disabled:!1,crudState:0});console.log("sdel time"),this.setState({lbutton:"Delete",disabled:!0,crudState:3})}this.setState({selCrud:e.target.value})}},{key:"onSubmit",value:function(){this.setState({error:""});try{if(""===this.state.user&&3!==this.state.crudState)throw"ERROR: Username was left blank.";if(""===this.state.pass&&3!==this.state.crudState)throw"ERROR: Password was left blank.";if(""===this.state.cPass&&3!==this.state.crudState)throw"ERROR: Confirm Password was left blank.";if(this.state.cPass!==this.state.pass&&3!==this.state.crudState)throw"ERROR: Passwords do not match."}catch(e){return this.setState({error:e}),void(null!==document.getElementById("error")&&document.getElementById("error").classList.remove("d-none"))}this.crudUse(),null!==document.getElementById("error")&&document.getElementById("error").classList.add("d-none"),this.setState({user:"",type:this.state.editUser.type,pass:"",cPass:"",selectedName:this.state.editUser.username})}},{key:"onCancel",value:function(){console.log("Cancel called: lbl"+this.state.selectedName),""!==this.state.selectedName&&(document.getElementById("lbl"+this.state.selectedName).classList.remove("focus"),document.getElementById("lbl"+this.state.selectedName).classList.remove("active")),"option2"===this.state.selCrud?(document.getElementById("error").classList.remove("d-none"),this.crudRefresh(2,1)):"option3"===this.state.selCrud&&(document.getElementById("error").classList.remove("d-none"),this.crudRefresh(3,1),this.setState({lbutton:"Save",disabled:!1})),this.setState({user:"",type:"Admin",pass:"",cPass:"",selectedName:""}),console.log(document.getElementById("error")),document.getElementById("error").classList.add("d-none")}},{key:"onChange",value:function(e){console.log("eventname: "+e.target.name);var t=this.state;t[e.target.name]=e.target.value,this.setState(t)}},{key:"getAllUsers",value:function(){var e=this;g.a.get(this.state.path+":5000/user/").then((function(t){e.setState({users:t.data})})).finally((function(){if(localStorage.getItem("docid")){console.log(e.state.users.findIndex((function(e){return e._id===localStorage.getItem("docid")})));var t=e.state.users.findIndex((function(e){return e._id===localStorage.getItem("docid")}));console.log(localStorage.getItem("docid")),g.a.get(e.state.path+":5000/user/"+localStorage.getItem("docid")).then((function(t){e.setState({editUser:t.data})})).finally((function(){e.setState({user:e.state.editUser.username,type:e.state.editUser.type,pass:"",cPass:"",selectedName:e.state.editUser.username,crudState:2,selectedIndex:t}),console.log("test: "+e.state.selectedIndex),document.getElementById("lbloption1").classList.remove("focus"),document.getElementById("lbloption1").classList.remove("active"),document.getElementById("lbloption2").classList.add("focus"),document.getElementById("lbloption2").classList.add("active")})),localStorage.removeItem("docid")}}))}},{key:"crudUse",value:function(){var e=this,t=this.state.user,a=this.state.type,s=this.state.pass,n=localStorage.getItem("username"),l=localStorage.getItem("username"),o=new Date,i=new Date;switch(console.log("test this mess: "+l),this.state.crudState){case 0:var r;g.a.get(this.state.path+":5000/user/u/"+t).then((function(e){null!==e.data&&(r=e.data.username)})).finally((function(){if(r===t)return e.setState({error:"Username already exists."}),void document.getElementById("error").classList.remove("d-none");g.a.post(e.state.path+":5000/user/",{username:t,type:a,password:s,createdBy:n,updatedBy:l,createdDate:i,updatedDate:o}).then((function(e){})).finally((function(){e.getAllUsers()}))}));break;case 1:g.a.get(this.state.path+":5000/user/"+this.state.users[this.state.selectedIndex]._id).then((function(t){e.state({editUser:t.data})}));break;case 2:n=this.state.editUser.createdBy,i=this.state.editUser.createdDate,g.a.put(this.state.path+":5000/user/"+this.state.users[this.state.selectedIndex]._id,{username:t,type:a,password:s,createdBy:n,updatedBy:l,createdDate:i,updatedDate:o}).then((function(){})).finally((function(){e.getAllUsers()}));break;case 3:g.a.delete(this.state.path+":5000/user/"+this.state.users[this.state.selectedIndex]._id).then((function(e){})).finally((function(){e.getAllUsers()}))}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement(E,null),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3 border d-none d-lg-block recent height-cap"},n.a.createElement("div",{className:"row btn-group btn-group-toggle btn-group-special btn-group-vertical force-scroll","data-toggle":"buttons"},this.state.users.map((function(t,a){return n.a.createElement("label",{id:"lbluser"+a,className:"btn btn-secondary w-100"},n.a.createElement("input",{type:"radio",name:"user",id:"user"+a,value:a,onClick:e.handleUserChange}),n.a.createElement("div",null,t.username))})))),n.a.createElement("div",{className:"col-lg-9 border calendar "},n.a.createElement("div",{className:"btn-group btn-group-toggle w-100","data-toggle":"buttons"},n.a.createElement("label",{id:"lbloption1",className:"btn btn-secondary active"},n.a.createElement("input",{type:"radio",name:"options",id:"option1",value:"option1",checked:"option1"===this.state.selCrud,onClick:this.handleCrudChange})," New"),n.a.createElement("label",{id:"lbloption2",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option2",value:"option2",checked:"option2"===this.state.selCrud,onClick:this.handleCrudChange})," Save"),n.a.createElement("label",{id:"lbloption3",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option3",value:"option3",checked:"option3"===this.state.selCrud,onClick:this.handleCrudChange})," Delete")),n.a.createElement("h5",{className:"text-center"},this.state.header),n.a.createElement("div",{className:"alert alert-danger d-none",id:"error",role:"alert"},this.state.error),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Username")),n.a.createElement("input",{type:"text",name:"user",value:this.state.user,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Permission Type")),n.a.createElement("select",{className:"form-control",name:"type",value:this.state.type,onChange:this.onChange,disabled:this.state.disabled,id:"type"},n.a.createElement("option",null,"Admin"),n.a.createElement("option",null,"Dispatcher"),n.a.createElement("option",null,"Field Worker"))),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Password")),n.a.createElement("input",{type:"password",name:"pass",value:this.state.pass,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Confirm Password")),n.a.createElement("input",{type:"password",name:"cPass",value:this.state.cPass,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onSubmit},this.state.lbutton)," ",n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onCancel},this.state.rbutton)),n.a.createElement("div",{className:"col border user d-lg-none "},n.a.createElement("div",{className:"row btn-group btn-group-toggle btn-group-special btn-group-vertical","data-toggle":"buttons"},this.state.users.map((function(t,a){return n.a.createElement("label",{id:"lbluser"+a,className:"btn btn-secondary w-100"},n.a.createElement("input",{type:"radio",name:"user",id:"user"+a,value:a,onClick:e.handleUserChange}),n.a.createElement("div",null,t.username))})))))))}}]),a}(s.Component),k=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={path:window.location.protocol+"//"+window.location.hostname,crudState:0,selected:"",cUser:"",uid:"",name:"",address:"",address2:"",city:"",zip:"",phone:"",edit:"",lbutton:"Save",rbutton:"Cancel",selCrud:"option1",selectedName:"",selectedIndex:0,disabled:!1,header:"Create New Customer",documents:[],error:"",test:[]},s.onSubmit=s.onSubmit.bind(Object(u.a)(s)),s.onChange=s.onChange.bind(Object(u.a)(s)),s.onCancel=s.onCancel.bind(Object(u.a)(s)),s.handleCrudChange=s.handleCrudChange.bind(Object(u.a)(s)),s.handleEditChange=s.handleEditChange.bind(Object(u.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log(""===localStorage.getItem("userType")),"false"!==localStorage.getItem("isLoggedIn")&&localStorage.getItem("isLoggedIn")&&"Field Worker"!==localStorage.getItem("userType")||void 0!==this.props.history&&this.props.history.push("/"),this.setState({cUser:localStorage.getItem("currentUser"),uid:localStorage.getItem("userId")}),this.getAllDocuments()}},{key:"crudRefresh",value:function(e,t){document.getElementById("lbloption"+e).classList.remove("focus"),document.getElementById("lbloption"+e).classList.remove("active"),document.getElementById("lbloption"+t).classList.add("focus"),document.getElementById("lbloption"+t).classList.add("active"),this.setState({lbutton:"Save",disabled:!1})}},{key:"inputReset",value:function(){this.setState({name:"",address:"",address2:"",city:"",zip:"",phone:""})}},{key:"inputFill",value:function(e,t,a,s,n,l){this.setState({name:e,address:t,address2:a,city:s,zip:n,phone:l})}},{key:"handleEditChange",value:function(e){var t=this,a=e.target.value;"option1"===this.state.selCrud?(this.crudRefresh(1,2),this.setState({selCrud:"option2"})):"option3"===this.state.selCrud&&(this.crudRefresh(3,2),this.setState({selCrud:"option2"})),g.a.get(this.state.path+":5000/customer/"+this.state.documents[a]._id).then((function(e){console.log("t"+e.data.name),t.setState({edit:e.data})})).finally((function(){console.log("t2"+t.state.edit.name),t.setState({name:t.state.edit.name,address:t.state.edit.address,address2:t.state.edit.address2,city:t.state.edit.city,zip:t.state.edit.zip,phone:t.state.edit.phone,selectedName:"customer"+a,selectedIndex:a,crudState:2})}))}},{key:"handleCrudChange",value:function(e){if("option1"===e.target.value)document.getElementById("error").classList.add("d-none"),this.inputReset(),this.setState({lbutton:"Save",selectedName:"",selectedIndex:-1,disabled:!1,crudState:0});else if("option2"===e.target.value){if(""===this.state.selectedName)return this.setState({error:"ERROR: Please select user before attempting to edit a user."}),document.getElementById("error").classList.remove("d-none"),this.crudRefresh(2,1),void this.setState({lbutton:"Save",disabled:!1,crudState:0});console.log("save time"),this.setState({lbutton:"Save",disabled:!1,crudState:2})}else{if(""===this.state.selectedName)return this.setState({error:"ERROR: Please select user before attempting to delete a user."}),document.getElementById("error").classList.remove("d-none"),this.crudRefresh(3,1),void this.setState({lbutton:"Save",disabled:!1,crudState:0});console.log("sdel time"),this.setState({lbutton:"Delete",disabled:!0,crudState:3})}this.setState({selCrud:e.target.value})}},{key:"onSubmit",value:function(){this.setState({error:""});try{if(""===this.state.name&&3!==this.state.crudState)throw"ERROR: Name was left blank.";if(""===this.state.address&&3!==this.state.crudState)throw"ERROR: Address was left blank.";if(""===this.state.city&&3!==this.state.crudState)throw"ERROR: City was left blank.";if(""===this.state.zip&&3!==this.state.crudState)throw"ERROR: Zip was left blank.";if(""===this.state.phone&&3!==this.state.crudState)throw"ERROR: Phone number was left blank."}catch(e){return this.setState({error:e}),void(null!==document.getElementById("error")&&document.getElementById("error").classList.remove("d-none"))}this.crudUse(),null!==document.getElementById("error")&&document.getElementById("error").classList.add("d-none"),this.inputReset(),this.setState({selectedName:this.state.edit.name})}},{key:"onCancel",value:function(e){console.log("Cancel called: lbl"+this.state.selectedName),""!==this.state.selectedName&&(document.getElementById("lbl"+this.state.selectedName).classList.remove("focus"),document.getElementById("lbl"+this.state.selectedName).classList.remove("active")),"option2"===this.state.selCrud?(document.getElementById("error").classList.remove("d-none"),this.crudRefresh(2,1)):"option3"===this.state.selCrud&&(document.getElementById("error").classList.remove("d-none"),this.crudRefresh(3,1),this.setState({lbutton:"Save",disabled:!1})),this.inputReset(),this.setState({selectedName:""}),document.getElementById("error").classList.add("d-none")}},{key:"onChange",value:function(e){var t=this.state;t[e.target.name]=e.target.value,this.setState(t)}},{key:"getAllDocuments",value:function(){var e=this;g.a.get(this.state.path+":5000/customer/").then((function(t){e.setState({documents:t.data})})).finally((function(){if(localStorage.getItem("docid")){var t=e.state.documents.findIndex((function(e){return e._id===localStorage.getItem("docid")}));console.log(localStorage.getItem("docid")),g.a.get(e.state.path+":5000/customer/"+localStorage.getItem("docid")).then((function(t){e.setState({edit:t.data})})).finally((function(){e.setState({name:e.state.edit.name,address:e.state.edit.address,address2:e.state.edit.address2,city:e.state.edit.city,zip:e.state.edit.zip,phone:e.state.edit.phone,crudState:2,selectedName:"customer"+t,selectedIndex:t}),document.getElementById("lbloption1").classList.remove("focus"),document.getElementById("lbloption1").classList.remove("active"),document.getElementById("lbloption2").classList.add("focus"),document.getElementById("lbloption2").classList.add("active")})),localStorage.removeItem("docid")}}))}},{key:"crudUse",value:function(){var e=this,t=this.state.uid,a=this.state.name,s=this.state.address,n=this.state.address2,l=this.state.city,o=this.state.zip,i=this.state.phone,r=localStorage.getItem("username"),c=localStorage.getItem("username"),d=new Date,u=new Date;switch(this.state.crudState){case 0:g.a.post(this.state.path+":5000/customer/",{uid:t,name:a,address:s,address2:n,city:l,zip:o,phone:i,createdBy:r,updatedBy:c,createdDate:u,updatedDate:d}).then((function(e){})).finally((function(){e.getAllDocuments()}));break;case 1:g.a.get(this.state.path+":5000/customer/"+this.state.documents[this.state.selectedIndex]._id).then((function(t){e.state({edit:t.data})}));break;case 2:g.a.get(this.state.path+":5000/customer/"+this.state.documents[this.state.selectedIndex]._id).then((function(e){r=e.data.createdBy,u=e.data.createdDate})).finally((function(){g.a.put(e.state.path+":5000/customer/"+e.state.documents[e.state.selectedIndex]._id,{uid:t,name:a,address:s,address2:n,city:l,zip:o,phone:i,createdBy:r,updatedBy:c,createdDate:u,updatedDate:d}).then((function(){})).finally((function(){e.getAllDocuments()}))}));break;case 3:g.a.delete(this.state.path+":5000/customer/"+this.state.documents[this.state.selectedIndex]._id).then((function(e){})).finally((function(){e.getAllDocuments()}))}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement(E,null),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3 border d-none d-lg-block recent height-cap"},n.a.createElement("div",{className:"row btn-group btn-group-toggle btn-group-special btn-group-vertical force-scroll","data-toggle":"buttons"},this.state.documents.map((function(t,a){return n.a.createElement("label",{key:"customer"+a,id:"lbluser"+a,className:"btn btn-secondary w-100"},n.a.createElement("input",{type:"radio",name:"user",id:"user"+a,value:a,onClick:e.handleEditChange}),t.name)})))),n.a.createElement("div",{className:"col-lg-9 border input-col "},n.a.createElement("div",{className:"btn-group btn-group-toggle w-100","data-toggle":"buttons"},n.a.createElement("label",{id:"lbloption1",className:"btn btn-secondary active"},n.a.createElement("input",{type:"radio",name:"options",id:"option1",value:"option1",onClick:this.handleCrudChange})," New"),n.a.createElement("label",{id:"lbloption2",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option2",value:"option2",onClick:this.handleCrudChange})," Save"),n.a.createElement("label",{id:"lbloption3",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option3",value:"option3",onClick:this.handleCrudChange})," Delete")),n.a.createElement("h5",{className:"text-center"},this.state.header),n.a.createElement("div",{className:"alert alert-danger d-none",id:"error",role:"alert"},this.state.error),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Name")),n.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Address")),n.a.createElement("input",{type:"text",name:"address",value:this.state.address,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Address 2")),n.a.createElement("input",{type:"text",name:"address2",value:this.state.address2,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"City")),n.a.createElement("input",{type:"text",name:"city",value:this.state.city,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Zip")),n.a.createElement("input",{type:"text",name:"zip",value:this.state.zip,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Phone")),n.a.createElement("input",{type:"text",name:"phone",value:this.state.phone,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onSubmit},this.state.lbutton)," ",n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onCancel},this.state.rbutton)),n.a.createElement("div",{className:"col border user d-lg-none "},this.state.documents.map((function(e,t){return n.a.createElement("div",{className:"row namelist",key:t},n.a.createElement("button",{type:"button",className:"btn btn-secondary btn-lg btn-block"},e.name))}))))))}}]),a}(s.Component),S=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={path:window.location.protocol+"//"+window.location.hostname,crudState:0,selected:"",cUser:"",uid:"",cid:"",title:"",rate:"",supply:"",total:"",hours:"",overlap:!1,type:"rout",tasks:"",notes:"",edit:"",lbutton:"Save",rbutton:"Cancel",selCrud:"option1",selectedName:"",selectedIndex:0,disabled:!1,header:"Create New Appointmennt",documents:[],customers:[],workers:[],custid:"",workerid:"",workername:"",selCust:"",selCustId:"",error:"",test2:2,test:[]},s.onSubmit=s.onSubmit.bind(Object(u.a)(s)),s.onChange=s.onChange.bind(Object(u.a)(s)),s.onSelect=s.onSelect.bind(Object(u.a)(s)),s.onCancel=s.onCancel.bind(Object(u.a)(s)),s.onChecked=s.onChecked.bind(Object(u.a)(s)),s.handleCrudChange=s.handleCrudChange.bind(Object(u.a)(s)),s.handleAppChange=s.handleAppChange.bind(Object(u.a)(s)),s.handleCustomerChange=s.handleCustomerChange.bind(Object(u.a)(s)),s.handleEditChange=s.handleEditChange.bind(Object(u.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log(this.state.path),"false"!==localStorage.getItem("isLoggedIn")&&localStorage.getItem("isLoggedIn")&&"Field Worker"!==localStorage.getItem("userType")||void 0!==this.props.history&&this.props.history.push("/"),this.getAllDocuments(),this.getAllCustomers(),this.getAllWorkers()}},{key:"crudRefresh",value:function(e,t){document.getElementById("lbloption"+e).classList.remove("focus"),document.getElementById("lbloption"+e).classList.remove("active"),document.getElementById("lbloption"+t).classList.add("focus"),document.getElementById("lbloption"+t).classList.add("active"),this.setState({lbutton:"Save",disabled:!1})}},{key:"typeRefresh",value:function(e,t){document.getElementById("lbltype"+e).classList.remove("focus"),document.getElementById("lbltype"+e).classList.remove("active"),document.getElementById("lbltype"+t).classList.add("focus"),document.getElementById("lbltype"+t).classList.add("active")}},{key:"getTypeVal",value:function(e){var t="";switch(e){case"rout":t=1;break;case"cons":t=2;break;case"spec":t=3}return t}},{key:"inputReset",value:function(){this.setState({workerid:"",workername:"",cid:"",title:"",date:"",stime:"",etime:"",rate:"",supply:"",total:"",hours:"",tasks:"",notes:""})}},{key:"lzMinute",value:function(e){return(e.getMinutes()<10?"0":"")+e.getMinutes()}},{key:"lzHour",value:function(e){return(e.getHours()<10?"0":"")+e.getHours()}},{key:"roundMinutes",value:function(e){return e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0,0,0),e}},{key:"handleEditChange",value:function(e){var t=this,a=e.target.value;"option1"===this.state.selCrud?(this.crudRefresh(1,2),this.setState({selCrud:"option2"})):"option3"===this.state.selCrud&&(this.crudRefresh(3,2),this.setState({selCrud:"option2"})),void 0===this.state.custid&&(document.getElementById("customer").selectedIndex="0"),g.a.get(this.state.path+":5000/appointment/"+this.state.documents[a]._id).then((function(e){t.setState({edit:e.data})})).finally((function(){var e=new Date(t.state.edit.stime),s=new Date(t.state.edit.etime),n=t.getTypeVal(t.state.type);switch(t.setState({custid:t.state.edit.custid,workerid:t.state.edit.userid,title:t.state.edit.title,rate:t.state.edit.rate,supply:t.state.edit.supply,total:t.state.edit.total,hours:t.state.edit.hours,overlap:t.state.edit.overlap,date:t.state.edit.stime.substring(0,t.state.edit.stime.indexOf("T")),stime:t.lzHour(e)+":"+t.lzMinute(e),etime:t.lzHour(s)+":"+t.lzMinute(s),type:t.state.edit.type,tasks:t.state.edit.tasks,notes:t.state.edit.notes,selectedName:"customer"+a,selectedIndex:a,crudState:2}),t.typeRefresh(n,t.getTypeVal(t.state.type)),t.state.type){case"rout":document.getElementById("rate").classList.remove("d-none"),document.getElementById("supply").classList.add("d-none"),document.getElementById("total").classList.remove("d-none");break;case"cons":document.getElementById("rate").classList.add("d-none"),document.getElementById("supply").classList.add("d-none"),document.getElementById("total").classList.add("d-none");break;case"spec":document.getElementById("rate").classList.remove("d-none"),document.getElementById("supply").classList.remove("d-none"),document.getElementById("total").classList.remove("d-none")}}))}},{key:"handleCrudChange",value:function(e){if("option1"===e.target.value)document.getElementById("error").classList.add("d-none"),this.inputReset(),this.setState({lbutton:"Save",selectedName:"",selectedIndex:-1,disabled:!1,crudState:0});else if("option2"===e.target.value){if(""===this.state.selectedName)return this.setState({error:"ERROR: Please select user before attempting to edit a user."}),document.getElementById("error").classList.remove("d-none"),this.crudRefresh(2,1),void this.setState({lbutton:"Save",disabled:!1,crudState:0});this.setState({lbutton:"Save",disabled:!1,crudState:2})}else{if(""===this.state.selectedName)return this.setState({error:"ERROR: Please select user before attempting to delete a user."}),document.getElementById("error").classList.remove("d-none"),this.crudRefresh(3,1),void this.setState({lbutton:"Save",disabled:!1,crudState:0});this.setState({lbutton:"Delete",disabled:!0,crudState:3})}this.setState({selCrud:e.target.value})}},{key:"handleAppChange",value:function(e){"apptype1"===e.target.value?(document.getElementById("tasks").classList.remove("d-none"),document.getElementById("tasks-label").classList.remove("d-none"),document.getElementById("rate").classList.remove("d-none"),document.getElementById("supply").classList.add("d-none"),document.getElementById("total").classList.remove("d-none"),this.setState({type:"rout"})):"apptype2"===e.target.value?(document.getElementById("tasks").classList.add("d-none"),document.getElementById("tasks-label").classList.add("d-none"),document.getElementById("rate").classList.add("d-none"),document.getElementById("supply").classList.add("d-none"),document.getElementById("total").classList.add("d-none"),this.setState({type:"cons"})):(document.getElementById("tasks").classList.add("d-none"),document.getElementById("tasks-label").classList.add("d-none"),document.getElementById("rate").classList.remove("d-none"),document.getElementById("supply").classList.remove("d-none"),document.getElementById("total").classList.remove("d-none"),this.setState({type:"spec"}))}},{key:"handleCustomerChange",value:function(e){this.setState({selCust:this.state.customers[e.target.value].name,custid:this.state.customers[e.target.value]._id})}},{key:"onChecked",value:function(){!1===this.state.overlap&&this.setState({overlap:!0}),!0===this.state.overlap&&this.setState({overlap:!1})}},{key:"onSubmit",value:function(){var e=this;this.setState({error:""});var t=new Date(this.state.date+" "+this.state.stime),a=new Date(this.state.date+" "+this.state.etime),s=new Date(this.state.date+" 06:00"),n=new Date(this.state.date+" 20:00"),l=new Date(this.state.date+" "+this.state.stime),o=new Date(this.state.date+" "+this.state.etime);try{if(""===this.state.title&&3!==this.state.crudState)throw"ERROR: Title was left blank.";if(""===this.state.custid&&3!==this.state.crudState)throw"ERROR: Customer was not selected.";if(""===this.state.workerid&&3!==this.state.crudState)throw"ERROR: Field Worker was not selected.";if(void 0===this.state.date&&3!==this.state.crudState)throw"ERROR: Date was not selected.";if(void 0===this.state.stime&&3!==this.state.crudState)throw"ERROR: Start time was not selected.";if(void 0===this.state.etime&&3!==this.state.crudState)throw"ERROR: End time was not selected.";if(""===this.state.rate&&3!==this.state.crudState&&"cons"!==this.state.type)throw"ERROR: Charge rate was left blank.";if(""===this.state.total&&3!==this.state.crudState&&"cons"!==this.state.type)throw"ERROR: Total rate was left blank.";if(o.getHours()<l.getHours()&&3!==this.state.crudState)throw"ERROR: Ending time must be higher than starting time. ";if(l.getHours()<s.getHours()&&3!==this.state.crudState)throw"ERROR: Starting time is lower than the opening time.";if(l.getHours()>n.getHours()&&3!==this.state.crudState)throw"ERROR: Starting time is higher than the closing time.";if(o.getHours()<s.getHours()&&3!==this.state.crudState)throw"ERROR: Ending time is lower than the opening time.";if(o.getHours()>n.getHours()&&3!==this.state.crudState)throw"ERROR: Ending time is higher than the closing time."}catch(r){return this.setState({error:r}),void(null!==document.getElementById("error")&&document.getElementById("error").classList.remove("d-none"))}var i=!1;g.a.get(this.state.path+":5000/appointment/d/"+t.getFullYear()+"/"+(parseInt(t.getMonth())+1)+"/"+t.getDate()).then((function(s){s.data.forEach((function(s){return t>=new Date(s.stime)&&t<=new Date(s.etime)&&e.state.workerid===s.userid&&3!==e.state.crudState&&!1===e.state.overlap?(i=!0,e.setState({error:"ERROR: Start time is overlapping with another appointment called: "+s.title+"; Assigned to the currently selected worker"}),void document.getElementById("error").classList.remove("d-none")):a>=new Date(s.stime)&&a<=new Date(s.etime)&&e.state.workerid===s.userid&&3!==e.state.crudState&&!1===e.state.overlap?(i=!0,e.setState({error:"ERROR: End time is overlapping with another appointment called: "+s.title+"; Assigned to the currently selected worker"}),void document.getElementById("error").classList.remove("d-none")):void 0}))})).finally((function(t){!0!==i&&(e.crudUse(),document.getElementById("error").classList.add("d-none"),e.inputReset(),e.setState({selectedName:e.state.edit.name}))}))}},{key:"onCancel",value:function(e){""!==this.state.selectedName&&(document.getElementById("lbl"+this.state.selectedName).classList.remove("focus"),document.getElementById("lbl"+this.state.selectedName).classList.remove("active")),"option2"===this.state.selCrud?(document.getElementById("error").classList.remove("d-none"),this.crudRefresh(2,1)):"option3"===this.state.selCrud&&(document.getElementById("error").classList.remove("d-none"),this.crudRefresh(3,1),this.setState({lbutton:"Save",disabled:!1})),this.inputReset(),this.setState({selectedName:""}),document.getElementById("error").classList.add("d-none")}},{key:"onSelect",value:function(e){"customer"===e.target.name?this.setState({custid:e.target.value}):"worker"===e.target.name&&this.setState({workerid:e.target.value})}},{key:"onChange",value:function(e){var t=this.state;t[e.target.name]=e.target.value,this.setState(t);var a="",s="";if(""!==this.state.date&&""!==this.state.stime&&""!==this.state.stime){new Date(this.state.date+" 06:00"),new Date(this.state.date+" 20:00"),a=new Date(this.state.date+" "+this.state.stime);var n=(s=new Date(this.state.date+" "+this.state.etime)).getHours()+s.getMinutes()/60,l=a.getHours()+a.getMinutes()/60;if(s.getHours()<a.getHours())return;if(document.getElementById("error").classList.add("d-none"),""!==this.state.supply&&"spec"===this.state.type){var o=this.state.rate*(n-l)+parseFloat(this.state.supply);this.setState({total:o.toFixed(2),hours:(n-l).toFixed(1)})}else{var i=this.state.rate*(n-l);this.setState({total:i.toFixed(2),hours:(n-l).toFixed(2)})}}}},{key:"getAllDocuments",value:function(){var e=this;g.a.get(this.state.path+":5000/appointment/").then((function(t){e.setState({documents:t.data})})).finally((function(){if(localStorage.getItem("docid")){var t=e.state.documents.findIndex((function(e){return e._id===localStorage.getItem("docid")}));console.log(localStorage.getItem("docid")),g.a.get(e.state.path+":5000/appointment/"+localStorage.getItem("docid")).then((function(t){e.setState({edit:t.data})})).finally((function(){var a=new Date(e.state.edit.stime),s=new Date(e.state.edit.etime),n=e.getTypeVal(e.state.type);switch(e.setState({custid:e.state.edit.custid,workerid:e.state.edit.userid,title:e.state.edit.title,rate:e.state.edit.rate,supply:e.state.edit.supply,total:e.state.edit.total,hours:e.state.edit.hours,overlap:e.state.edit.overlap,date:e.state.edit.stime.substring(0,e.state.edit.stime.indexOf("T")),stime:e.lzHour(a)+":"+e.lzMinute(a),etime:e.lzHour(s)+":"+e.lzMinute(s),type:e.state.edit.type,tasks:e.state.edit.tasks,notes:e.state.edit.notes,selectedName:"customer"+t,selectedIndex:t,crudState:2}),e.typeRefresh(n,e.getTypeVal(e.state.type)),e.state.type){case"rout":document.getElementById("rate").classList.remove("d-none"),document.getElementById("supply").classList.add("d-none"),document.getElementById("total").classList.remove("d-none");break;case"cons":document.getElementById("rate").classList.add("d-none"),document.getElementById("supply").classList.add("d-none"),document.getElementById("total").classList.add("d-none");break;case"spec":document.getElementById("rate").classList.remove("d-none"),document.getElementById("supply").classList.remove("d-none"),document.getElementById("total").classList.remove("d-none")}document.getElementById("lbloption1").classList.remove("focus"),document.getElementById("lbloption1").classList.remove("active"),document.getElementById("lbloption2").classList.add("focus"),document.getElementById("lbloption2").classList.add("active")})),localStorage.removeItem("docid")}}))}},{key:"getAllCustomers",value:function(){var e=this;g.a.get(this.state.path+":5000/customer/").then((function(t){e.setState({customers:t.data})}))}},{key:"getAllWorkers",value:function(){var e=this,t=[];g.a.get(this.state.path+":5000/user/").then((function(a){a.data.forEach((function(e){"Field Worker"===e.type&&t.push(e)})),e.setState({workers:t})}))}},{key:"crudUse",value:function(){var e=this,t=this.state.workerid,a=this.state.custid,s=this.state.title,n=this.state.rate,l=this.state.supply,o=this.state.total,i=this.state.hours,r=new Date(this.state.date+" "+this.state.stime),c=new Date(this.state.date+" "+this.state.etime),d=this.state.overlap,u=this.state.type,m=this.state.tasks,p=this.state.notes,h=localStorage.getItem("username"),b=localStorage.getItem("username"),y=new Date,v=new Date;switch(this.state.crudState){case 0:g.a.post(this.state.path+":5000/appointment/",{userid:t,custid:a,title:s,rate:n,supply:l,total:o,hours:i,overlap:d,type:u,tasks:m,notes:p,stime:r,etime:c,createdBy:h,updatedBy:b,createdDate:v,updatedDate:y}).then((function(e){})).finally((function(){e.getAllDocuments(),e.getAllCustomers(),e.getAllWorkers()}));break;case 1:g.a.get(this.state.path+":5000/appointment/"+this.state.documents[this.state.selectedIndex]._id).then((function(t){e.state({edit:t.data})}));break;case 2:g.a.get(this.state.path+":5000/appointment/"+this.state.documents[this.state.selectedIndex]._id).then((function(e){h=e.data.createdBy,v=e.data.createdDate})).finally((function(){g.a.put(e.state.path+":5000/appointment/"+e.state.documents[e.state.selectedIndex]._id,{userid:t,custid:a,title:s,rate:n,supply:l,total:o,hours:i,overlap:d,type:u,notes:p,stime:r,etime:c,createdBy:h,updatedBy:b,createdDate:v,updatedDate:y}).then((function(){})).finally((function(){e.getAllDocuments(),e.getAllCustomers(),e.getAllWorkers()}))}));break;case 3:g.a.delete(this.state.path+":5000/appointment/"+this.state.documents[this.state.selectedIndex]._id).then((function(e){})).finally((function(){e.getAllDocuments(),e.getAllCustomers(),e.getAllWorkers()}))}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement(E,null),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-3 border d-none d-lg-block recent height-cap"},n.a.createElement("div",{className:"row btn-group btn-group-toggle btn-group-special btn-group-vertical force-scroll","data-toggle":"buttons"},this.state.documents.map((function(t,a){return n.a.createElement("label",{key:"customer"+a,id:"lbluser"+a,className:"btn btn-secondary w-100"},n.a.createElement("input",{type:"radio",name:"user",id:"user"+a,value:a,onClick:e.handleEditChange}),t.title)})))),n.a.createElement("div",{className:"col-lg-9 border input-col "},n.a.createElement("div",{className:"btn-group btn-group-toggle w-100","data-toggle":"buttons"},n.a.createElement("label",{id:"lbloption1",className:"btn btn-secondary active"},n.a.createElement("input",{type:"radio",name:"options",id:"option1",value:"option1",onClick:this.handleCrudChange})," New"),n.a.createElement("label",{id:"lbloption2",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option2",value:"option2",onClick:this.handleCrudChange})," Save"),n.a.createElement("label",{id:"lbloption3",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option3",value:"option3",onClick:this.handleCrudChange})," Delete")),n.a.createElement("h5",{className:"text-center"},this.state.header),n.a.createElement("div",{className:"alert alert-danger d-none",id:"error",role:"alert"},this.state.error),n.a.createElement("div",{className:"btn-group btn-group-toggle w-100 mb-4","data-toggle":"buttons"},n.a.createElement("label",{id:"lbltype1",className:"btn btn-secondary active focus"},n.a.createElement("input",{type:"radio",name:"apptype",id:"apptype1",value:"apptype1",onClick:this.handleAppChange})," Labor"),n.a.createElement("label",{id:"lbltype2",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"apptype",id:"apptype2",value:"apptype2",onClick:this.handleAppChange})," Consultation"),n.a.createElement("label",{id:"lbltype3",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"apptype",id:"apptype3",value:"apptype3",onClick:this.handleAppChange})," Special Order")),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Title")),n.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Customer")),n.a.createElement("select",{className:"form-control",id:"customer",name:"customer",value:this.state.custid,disabled:this.state.disabled,onChange:this.onSelect},n.a.createElement("option",{value:""},"Select a customer."),this.state.customers.map((function(e,t){return n.a.createElement("option",{key:t,value:e._id},e.name)})))),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Field Worker")),n.a.createElement("select",{className:"form-control",id:"worker",name:"worker",value:this.state.workerid,disabled:this.state.disabled,onChange:this.onSelect},n.a.createElement("option",{value:""},"Select a worker."),this.state.workers.map((function(e,t){return n.a.createElement("option",{key:t,value:e._id},e.username)})))),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Date")),n.a.createElement("input",{type:"date",name:"date",value:this.state.date,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Start Time")),n.a.createElement("input",{type:"time",name:"stime",value:this.state.stime,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"}),n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"End Time")),n.a.createElement("input",{type:"time",name:"etime",value:this.state.etime,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"overlap",name:"overlap",value:this.state.overlap,onClick:this.onChecked}),n.a.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"Allow Overlap")),n.a.createElement("div",{className:"input-group mb-3",id:"rate"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Charge Rate")),n.a.createElement("input",{type:"number",name:"rate",step:1,value:this.state.rate,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3 d-none",id:"supply"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Supply Charge")),n.a.createElement("input",{type:"number",name:"supply",value:this.state.supply,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("div",{className:"input-group mb-3",id:"total"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Total Charge")),n.a.createElement("input",{type:"number",name:"total",value:this.state.total,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"})),n.a.createElement("h5",{id:"tasks-label"},"Tasks to complete: (Separate with commas)"),n.a.createElement("textarea",{className:"form-control","aria-label":"With textarea",onChange:this.onChange,id:"tasks",name:"tasks",value:this.state.tasks}),n.a.createElement("h5",null,"Notes"),n.a.createElement("textarea",{className:"form-control","aria-label":"With textarea",onChange:this.onChange,name:"notes",value:this.state.notes}),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onSubmit},this.state.lbutton)," ",n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onCancel},this.state.rbutton)),n.a.createElement("div",{className:"col border user d-lg-none "},n.a.createElement("div",{className:"row btn-group btn-group-toggle btn-group-special btn-group-vertical","data-toggle":"buttons"},this.state.documents.map((function(t,a){return n.a.createElement("label",{key:"customer"+a,id:"lbluser"+a,className:"btn btn-secondary w-100"},n.a.createElement("input",{type:"radio",name:"user",id:"user"+a,value:a,onClick:e.handleEditChange}),t.title)})))))))}}]),a}(s.Component),w=(a(15),function(){function e(t,a,s,n,l,o,i,r,d,u){Object(c.a)(this,e),this._id=t,this._userid=a,this._custid=s,this._title=n,this._overlap=l,this._hours=o,this._type=i,this._notes=r,this._stime=d,this._etime=u}return Object(d.a)(e,[{key:"exportStartDate",value:function(){return new Date(this._stime)}},{key:"exportEndDate",value:function(){return new Date(this._etime)}},{key:"indexMonth",value:function(){return new Date(this._stime).getMonth()}},{key:"print",value:function(){console.log("_id:"+this._id),console.log("_uid:"+this._uid)}}]),e}()),N=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e,s,n,l,o,i,r,d,u,m,p,h,g){var b;return Object(c.a)(this,a),(b=t.call(this,e,s,n,l,o,i,r,d,u,m))._rate=p,b._total=h,b._tasks=g,b}return Object(d.a)(a,[{key:"getTaskCount",value:function(){if(console.log(this._tasks),void 0!==this._tasks&&""!==this._tasks)return this._tasks.split(",").length}}]),a}(w),C=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e,s,n,l,o,i,r,d,u,m,p,h,g){var b;return Object(c.a)(this,a),(b=t.call(this,e,s,n,l,o,i,r,d,u,m))._rate=p,b._total=h,b._supply=g,b}return a}(w),I=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={path:window.location.protocol+"//"+window.location.hostname,crudState:"",selected:"",cUser:"",categories:[],entries:[],year:(new Date).getFullYear(),tblall:[],tblrou:[],tblcon:[],tblspe:[],listapps:[],listrout:[],listcons:[],listspec:[]},e.handleTypeChange=e.handleTypeChange.bind(Object(u.a)(e)),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){"false"!==localStorage.getItem("isLoggedIn")&&localStorage.getItem("isLoggedIn")&&"Admin"===localStorage.getItem("userType")||this.props.history.push("/");this.setState({categories:["Month","Appointments","Sum","Average","Routine Jobs","Consultations","Special Orders"]}),this.getAllApps(this.state.year)}},{key:"handleTypeChange",value:function(e){switch(e.target.value){case"tblall":this.setState({categories:["Month","Appointments","Sum","Average","Routine Jobs","Consultations","Special Orders"]}),document.getElementById("tblall").classList.remove("d-none"),document.getElementById("tblrou").classList.add("d-none"),document.getElementById("tblcon").classList.add("d-none"),document.getElementById("tblspe").classList.add("d-none");break;case"tblrou":this.setState({categories:["Month","Appointments","Sum","Average","Tasks","Average Tasks"]}),document.getElementById("tblall").classList.add("d-none"),document.getElementById("tblrou").classList.remove("d-none"),document.getElementById("tblcon").classList.add("d-none"),document.getElementById("tblspe").classList.add("d-none");break;case"tblcon":this.setState({categories:["Month","Appointments"]}),document.getElementById("tblall").classList.add("d-none"),document.getElementById("tblrou").classList.add("d-none"),document.getElementById("tblcon").classList.remove("d-none"),document.getElementById("tblspe").classList.add("d-none");break;case"tblspe":this.setState({categories:["Month","Appointments","Sum","Average","Supply Cost","Average Supply Cost"]}),document.getElementById("tblall").classList.add("d-none"),document.getElementById("tblrou").classList.add("d-none"),document.getElementById("tblcon").classList.add("d-none"),document.getElementById("tblspe").classList.remove("d-none")}}},{key:"getCurrentYear",value:function(){g.a.get(this.state.path+":5000/appointment/y/"+this.state.year).then((function(e){e.data.forEach((function(e){console.log("  ---"+new Date(e.stime).getFullYear());switch(e.type){case"rout":new N(e._id,e.userid,e.custid,e.title,e.overlap,e.hours,e.type,e.notes,e.stime,e.etime,e.rate,e.total,e.tasks);break;case"cons":new w(e._id,e.usserid,e.custid,e.title,e.overlap,e.hours,e.type,e.notes,e.stime,e.etime);break;case"spec":new C(e._id,e.usserid,e.custid,e.title,e.overlap,e.hours,e.type,e.notes,e.stime,e.etime,e.rate,e.total,e.supply)}}))}))}},{key:"getAllApps",value:function(e){var t=this,a=[],s=[],n=[];g.a.get(this.state.path+":5000/appointment/y/"+e).then((function(e){e.data.forEach((function(e){var t={};switch(e.type){case"rout":console.log(e.stime),t=new N(e._id,e.userid,e.custid,e.title,e.overlap,e.hours,e.type,e.notes,e.stime,e.etime,e.rate,e.total,e.tasks),a.push(t);break;case"cons":t=new w(e._id,e.usserid,e.custid,e.title,e.overlap,e.hours,e.type,e.notes,e.stime,e.etime),s.push(t);break;case"spec":t=new C(e._id,e.usserid,e.custid,e.title,e.overlap,e.hours,e.type,e.notes,e.stime,e.etime,e.rate,e.total,e.supply),n.push(t)}})),t.setState({listrout:a,listcons:s,listspec:n})})).finally((function(){t.loadApps()}))}},{key:"changeYear",value:function(e){this.getAllApps(this.state.year+e),this.setState({year:this.state.year+e}),console.log(this.state.year)}},{key:"getMonthName",value:function(e){var t="";switch(e){case 0:t="Jan";break;case 1:t="Feb";break;case 2:t="Mar";break;case 3:t="Apr";break;case 4:t="May";break;case 5:t="Jun";break;case 6:t="Jul";break;case 7:t="Aug";break;case 8:t="Sep";break;case 9:t="Oct";break;case 10:t="Nov";break;case 11:t="Dec"}return t}},{key:"loadApps",value:function(){for(var e=[],t=[],a=[],s=[],n=0;n<=11;n++){var l={count:0,sum:0,avg:0,rout:0,cons:0,spec:0},o={count:0,sum:0,avg:0,tasks:0,avgtasks:0},i={count:0},r={count:0,sum:0,avg:0,sup:0,avgsup:0};e.push(l),t.push(o),a.push(i),s.push(r)}this.state.listrout.forEach((function(a){console.log(a._stime),console.log(a.indexMonth()),e[a.indexMonth()].count++,e[a.indexMonth()].rout++,t[a.indexMonth()].count++,e[a.indexMonth()].sum=a._total+e[a.indexMonth()].sum,t[a.indexMonth()].sum=a._total+t[a.indexMonth()].sum,e[a.indexMonth()].sum>0&&(e[a.indexMonth()].avg=(e[a.indexMonth()].sum/e[a.indexMonth()].count).toFixed(2)),t[a.indexMonth()].sum>0&&(t[a.indexMonth()].avg=(t[a.indexMonth()].sum/t[a.indexMonth()].count).toFixed(2)),t[a.indexMonth()].tasks=a.getTaskCount()+t[a.indexMonth()].tasks,t[a.indexMonth()].tasks>0&&(t[a.indexMonth()].avgtasks=(t[a.indexMonth()].tasks/t[a.indexMonth()].count).toFixed(2))})),this.state.listcons.forEach((function(t){e[t.indexMonth()].count++,e[t.indexMonth()].cons++,a[t.indexMonth()].count++})),this.state.listspec.forEach((function(t){e[t.indexMonth()].count++,e[t.indexMonth()].spec++,s[t.indexMonth()].count++,e[t.indexMonth()].sum=t._total+e[t.indexMonth()].sum,s[t.indexMonth()].sum=t._total+s[t.indexMonth()].sum,e[t.indexMonth()].sum>0&&(e[t.indexMonth()].avg=(e[t.indexMonth()].sum/e[t.indexMonth()].count).toFixed(2)),s[t.indexMonth()].sum>0&&(s[t.indexMonth()].avg=(s[t.indexMonth()].sum/s[t.indexMonth()].count).toFixed(2)),s[t.indexMonth()].sup=t._supply+s[t.indexMonth()].sup,s[t.indexMonth()].sup>0&&(s[t.indexMonth()].supavg=(s[t.indexMonth()].sup/s[t.indexMonth()].count).toFixed(2))})),this.setState({tblall:e}),this.setState({tblrou:t}),this.setState({tblcon:a}),this.setState({tblspe:s}),console.log(this.state.tblall)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg border input-col p-0 h-100"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-2 "},n.a.createElement("button",{type:"button",class:"btn btn-secondary  w-100 h-100 m-0",onClick:function(){return e.changeYear(-1)}},n.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-left",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{"fill-rule":"evenodd",d:"M5.854 4.646a.5.5 0 0 1 0 .708L3.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z"}),n.a.createElement("path",{"fill-rule":"evenodd",d:"M2.5 8a.5.5 0 0 1 .5-.5h10.5a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"})))),n.a.createElement("div",{className:"col-8"},n.a.createElement("h4",{className:"display-4 mb-4 text-center"},"Current Year: ",this.state.year)),n.a.createElement("div",{className:"col-2 "},n.a.createElement("button",{type:"button",class:"btn btn-secondary  w-100 h-100 m-0",onClick:function(){return e.changeYear(1)}},n.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-arrow-right",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{"fill-rule":"evenodd",d:"M10.146 4.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L12.793 8l-2.647-2.646a.5.5 0 0 1 0-.708z"}),n.a.createElement("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8z"}))))),n.a.createElement("div",{className:"col-lg border  recent p-0"},n.a.createElement("div",{className:"btn-group btn-group-toggle w-100 w-100 m-0 ","data-toggle":"buttons"},n.a.createElement("label",{className:"btn btn-secondary w-100 active"},n.a.createElement("input",{type:"radio",name:"type",id:"allApps",value:"tblall",onClick:this.handleTypeChange})," All Appointments"),n.a.createElement("label",{className:"btn btn-secondary w-100"},n.a.createElement("input",{type:"radio",name:"type",id:"allLabor",value:"tblrou",onClick:this.handleTypeChange})," All Labor"),n.a.createElement("label",{className:"btn btn-secondary w-100"},n.a.createElement("input",{type:"radio",name:"type",id:"allCons",value:"tblcon",onClick:this.handleTypeChange})," All Consultations"),n.a.createElement("label",{className:"btn btn-secondary w-100"},n.a.createElement("input",{type:"radio",name:"type",id:"allSpec",value:"tblspe",onClick:this.handleTypeChange})," All Special Orders"))),n.a.createElement("div",{className:"col-lg "},n.a.createElement("table",{className:"table table-striped table-fix"},n.a.createElement("thead",{className:"thead-dark"},n.a.createElement("tr",null,this.state.categories.map((function(e,t){return n.a.createElement("th",{scope:"col",key:t},e)})))),n.a.createElement("tbody",{id:"tblall",className:"empty-square all-apps"},this.state.tblall.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},e.getMonthName(a)),n.a.createElement("td",null,t.count),n.a.createElement("td",null,t.sum),n.a.createElement("td",null,t.avg),n.a.createElement("td",null,t.rout),n.a.createElement("td",null,t.cons),n.a.createElement("td",null,t.spec))}))),n.a.createElement("tbody",{id:"tblrou",className:"empty-square all-apps d-none"},this.state.tblrou.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},e.getMonthName(a)),n.a.createElement("td",null,t.count),n.a.createElement("td",null,t.sum),n.a.createElement("td",null,t.avg),n.a.createElement("td",null,t.tasks),n.a.createElement("td",null,t.avgtasks))}))),n.a.createElement("tbody",{id:"tblcon",className:"empty-square all-apps d-none"},this.state.tblcon.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},e.getMonthName(a)),n.a.createElement("td",null,t.count))}))),n.a.createElement("tbody",{id:"tblspe",className:"empty-square all-apps d-none"},this.state.tblspe.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},e.getMonthName(a)),n.a.createElement("td",null,t.count),n.a.createElement("td",null,t.sum),n.a.createElement("td",null,t.avg),n.a.createElement("td",null,t.sup),n.a.createElement("td",null,t.supavg))})))))))))}}]),a}(s.Component),B=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={path:window.location.protocol+"//"+window.location.hostname,crudState:"",selected:"",cUser:"",categories:[{title:"Name/Title",class:""},{title:"Created by",class:""},{title:"Updated By",class:""},{title:"Created Date",class:""},{title:"Updated Date",class:""}],year:(new Date).getFullYear(),search:"",tbluse:[],tblcus:[],tblapp:[]},e.handleTypeChange=e.handleTypeChange.bind(Object(u.a)(e)),e.onSubmit=e.onSubmit.bind(Object(u.a)(e)),e.onChange=e.onChange.bind(Object(u.a)(e)),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){"false"!==localStorage.getItem("isLoggedIn")&&localStorage.getItem("isLoggedIn")&&"Field Worker"!==localStorage.getItem("userType")||this.props.history.push("/")}},{key:"loadData",value:function(e){localStorage.setItem("docid",e.target.name)}},{key:"onSubmit",value:function(){var e=this;console.log(this.state.search);var t=this.state.search;(this.state.search="")||(console.log("test: "+this.state.path+":5000/user/s/"+t),g.a.get(this.state.path+":5000/user/s/"+t).then((function(t){e.setState({tbluse:t.data})})),g.a.get(this.state.path+":5000/customer/s/"+t).then((function(t){e.setState({tblcus:t.data})})),g.a.get(this.state.path+":5000/appointment/s/"+t).then((function(t){e.setState({tblapp:t.data}),console.log(t.data)})))}},{key:"onChange",value:function(e){console.log("eventname: "+e.target.name);var t=this.state;t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleTypeChange",value:function(e){switch(console.log(e.target.value),e.target.value){case"option1":document.getElementById("tbluse").classList.remove("d-none"),document.getElementById("tblcus").classList.remove("d-none"),document.getElementById("tblapp").classList.remove("d-none"),document.getElementById("tblusem").classList.remove("d-none"),document.getElementById("tblcusm").classList.remove("d-none"),document.getElementById("tblappm").classList.remove("d-none");break;case"option2":document.getElementById("tbluse").classList.remove("d-none"),document.getElementById("tblcus").classList.add("d-none"),document.getElementById("tblapp").classList.add("d-none"),document.getElementById("tblusem").classList.remove("d-none"),document.getElementById("tblcusm").classList.add("d-none"),document.getElementById("tblappm").classList.add("d-none");break;case"option3":document.getElementById("tbluse").classList.add("d-none"),document.getElementById("tblcus").classList.remove("d-none"),document.getElementById("tblapp").classList.add("d-none"),document.getElementById("tblusem").classList.add("d-none"),document.getElementById("tblcusm").classList.remove("d-none"),document.getElementById("tblappm").classList.add("d-none");break;case"option4":document.getElementById("tbluse").classList.add("d-none"),document.getElementById("tblcus").classList.add("d-none"),document.getElementById("tblapp").classList.remove("d-none"),document.getElementById("tblusem").classList.add("d-none"),document.getElementById("tblcusm").classList.add("d-none"),document.getElementById("tblappm").classList.remove("d-none")}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement("div",{className:"container border"},n.a.createElement("div",{className:"row border"},n.a.createElement("div",{className:"col-lg"},n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Title")),n.a.createElement("input",{type:"text",name:"search",value:this.state.search,onChange:this.onChange,disabled:this.state.disabled,className:"form-control",id:"basic-url","aria-describedby":"basic-addon3"}),n.a.createElement("button",{type:"button",className:"btn btn-primary m-0",onClick:this.onSubmit},"Submit")))),n.a.createElement("div",{className:"row border"},n.a.createElement("div",{className:"col-lg"},n.a.createElement("div",{className:"btn-group btn-group-toggle w-100","data-toggle":"buttons"},n.a.createElement("label",{id:"lbloption1",className:"btn btn-secondary active"},n.a.createElement("input",{type:"radio",name:"options",id:"option1",value:"option1",onClick:this.handleTypeChange})," All"),n.a.createElement("label",{id:"lbloption2",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option2",value:"option2",onClick:this.handleTypeChange})," Users"),n.a.createElement("label",{id:"lbloption3",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option3",value:"option3",onClick:this.handleTypeChange})," Customers"),n.a.createElement("label",{id:"lbloption3",className:"btn btn-secondary"},n.a.createElement("input",{type:"radio",name:"options",id:"option4",value:"option4",onClick:this.handleTypeChange})," Appointments")))),n.a.createElement("div",{className:"row border"},n.a.createElement("div",{className:"col-lg d-none d-md-block"},n.a.createElement("table",{className:"table table-striped table-fix"},n.a.createElement("thead",{className:"thead-dark"},n.a.createElement("tr",null,this.state.categories.map((function(e,t){return n.a.createElement("th",{scope:"col",key:t,className:e.class},e.title)})))),n.a.createElement("tbody",{id:"tbluse",className:"empty-square all-apps "},this.state.tbluse.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},n.a.createElement("a",{className:"",href:"/users",onClick:e.loadData,name:t._id}," ","User: "+t.username)),n.a.createElement("td",null,t.createdBy),n.a.createElement("td",null,t.updatedBy),n.a.createElement("td",null,t.createdDate),n.a.createElement("td",null,t.updatedDate))}))),n.a.createElement("tbody",{id:"tblcus",className:"empty-square all-apps "},this.state.tblcus.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},n.a.createElement("a",{className:"",href:"/customers",onClick:e.loadData,name:t._id}," Customer: ",t.name)),n.a.createElement("td",null,t.createdBy),n.a.createElement("td",null,t.updatedBy),n.a.createElement("td",null,t.createdDate),n.a.createElement("td",null,t.updatedDate))}))),n.a.createElement("tbody",{id:"tblapp",className:"empty-square all-apps "},this.state.tblapp.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},n.a.createElement("a",{className:"",href:"/appointments",onClick:e.loadData,name:t._id}," Appointment: ",t.title)),n.a.createElement("td",null,t.createdBy),n.a.createElement("td",null,t.updatedBy),n.a.createElement("td",null,t.createdDate),n.a.createElement("td",null,t.updatedDate))}))))),n.a.createElement("div",{className:"col-lg d-none d-sm-block d-md-none"},n.a.createElement("table",{className:"table table-striped table-fix"},n.a.createElement("thead",{className:"thead-dark"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Name/Title"),n.a.createElement("th",{scope:"col"},"CreatedBy"))),n.a.createElement("tbody",{id:"tblusem",className:"empty-square all-apps "},this.state.tbluse.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},n.a.createElement("a",{className:"",href:"/users",onClick:e.loadData,name:t._id}," ","User: "+t.username)),n.a.createElement("td",null,t.createdBy))}))),n.a.createElement("tbody",{id:"tblcusm",className:"empty-square all-apps "},this.state.tblcus.map((function(t,a){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:a},n.a.createElement("a",{className:"",href:"/customers",onClick:e.loadData,name:t._id}," Customer: ",t.name)),n.a.createElement("td",null,t.createdBy))}))),n.a.createElement("tbody",{id:"tblappm",className:"empty-square all-apps "},this.state.tblapp.map((function(e,t){return n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",key:t},"Appointment: ",e.title),n.a.createElement("td",null,e.createdBy))}))))))))}}]),a}(s.Component),L=a(9);Object(L.a)(),"".concat("/capstone/","main"),"".concat("/capstone/","users"),"".concat("/capstone/","customers"),"".concat("/capstone/","appointments"),"".concat("/capstone/","reports"),"".concat("/capstone/","search");var x=function(){return n.a.createElement("main",{className:"main full-height"},n.a.createElement(i.a,{basename:"capstone"},n.a.createElement(r.a,{path:"/",component:Object(r.e)(b),exact:!0}),n.a.createElement(r.a,{path:"/main",component:Object(r.e)(v)}),n.a.createElement(r.a,{path:"/users",component:Object(r.e)(f)}),n.a.createElement(r.a,{path:"/customers",component:Object(r.e)(k)}),n.a.createElement(r.a,{path:"/appointments",component:Object(r.e)(S)}),n.a.createElement(r.a,{path:"/reports",component:Object(r.e)(I)}),n.a.createElement(r.a,{path:"/search",component:Object(r.e)(B)})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.ca9a1011.chunk.js.map